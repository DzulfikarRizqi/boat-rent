<Window x:Class="CobaHW7.Dashboard"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:CobaHW7.ViewModels"
        Title="Dashboard" Height="1080" Width="1920"
        WindowStartupLocation="CenterScreen"
        Background="#F0F6FF">

    <Window.DataContext>
        <vm:DashboardUserViewModel/>
    </Window.DataContext>

    <!-- GLOBAL RESOURCES -->
    <Window.Resources>

        <!-- Sidebar button style -->
        <Style TargetType="Button" x:Key="SidebarButtonStyle">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#007ACC"/>
            <Setter Property="BorderBrush" Value="#007ACC"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="4">

                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                                                    <Border.Effect>
                            <DropShadowEffect BlurRadius="20" Opacity="0.30" ShadowDepth="2" Color="#88A8FF"/>
                        </Border.Effect>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#005FA3"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>

                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#004F8A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <!-- MAIN LAYOUT -->
    <Grid>

        <!-- ======= CONTENT SCROLL ======= -->
        <ScrollViewer x:Name="MainScroll"
                      VerticalScrollBarVisibility="Auto"
                      Margin="0,50,0,0">

            <StackPanel>


                <!-- LIST KAPAL (DYNAMIC + BOUND TO VIEWMODEL) -->
                <WrapPanel Margin="20" x:Name="BoatPanel">

                    <ItemsControl ItemsSource="{Binding Boats}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate>

                                <Border Background="White" Width="280" Margin="10"
                                        CornerRadius="8" BorderBrush="#E0E0E0" BorderThickness="1">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.1" Color="Black"/>
                                    </Border.Effect>

                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="160"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Border Grid.Row="0" CornerRadius="8,8,0,0" Background="#F0F0F0">
                                            <Image Source="{Binding ThumbnailPath}" Stretch="UniformToFill"/>
                                        </Border>

                                        <StackPanel Grid.Row="1" Margin="15">

                                            <TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="18" Margin="0,0,0,5"/>
                                            <TextBlock Text="{Binding Model}" FontSize="12" Foreground="Gray"/>

                                            <Separator Margin="0,10,0,10"/>

                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Text="Tahun:"/>
                                                <TextBlock Text="{Binding Year}" Grid.Column="1" HorizontalAlignment="Right"/>

                                                <TextBlock Text="Kapasitas:" Grid.Row="1"/>
                                                <TextBlock Text="{Binding Capacity}" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Right"/>

                                                <TextBlock Text="Harga:" Grid.Row="2"/>
                                                <TextBlock Text="{Binding PricePerDay, StringFormat='Rp {0:N0} /hari'}"
                                                           Grid.Row="2" Grid.Column="1"
                                                           HorizontalAlignment="Right" Foreground="#1976D2"/>
                                            </Grid>

                                            <!-- STATUS -->
                                            <TextBlock Margin="0,10,0,15" FontWeight="SemiBold">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Available}" Value="True">
                                                                <Setter Property="Text" Value="Status: Tersedia"/>
                                                                <Setter Property="Foreground" Value="Green"/>
                                                            </DataTrigger>

                                                            <DataTrigger Binding="{Binding Available}" Value="False">
                                                                <Setter Property="Text" Value="Status: Tidak Tersedia"/>
                                                                <Setter Property="Foreground" Value="Red"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>

                                            <Button Content="Pilih Kapal Ini"
                                                    Command="{Binding DataContext.SelectBoatCommand, 
                                                              RelativeSource={RelativeSource AncestorType=Window}}"
                                                    CommandParameter="{Binding}"
                                                    Height="40" 
                                                    Background="#1E63E9"
                                                    Foreground="White"
                                                    BorderBrush="#1649B2"
                                                    FontSize="14"
                                                    FontWeight="SemiBold"
                                                    BorderThickness="0"/>

                                        </StackPanel>
                                    </Grid>

                                </Border>

                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                </WrapPanel>

                <!-- ABOUT US -->
                <WrapPanel x:Name="AboutUsPanel" Margin="20" Width="800">
                    <Border Background="White" Margin="20" Width="750"
                            CornerRadius="10" Padding="20">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="20" Opacity="0.30" ShadowDepth="2" Color="#88A8FF"/>
                        </Border.Effect>

                        <StackPanel>
                            <TextBlock Text="ABOUT US"
                                       FontSize="26"
                                       FontWeight="Bold"
                                       Foreground="#0D47A1"
                                       Margin="0,0,0,10"
                                       TextAlignment="Center"/>

                            <TextBlock Text="   KAPALIN adalah platform modern yang menghadirkan layanan penyewaan kapal secara cepat, mudah, dan terpercaya. Kami menyediakan berbagai jenis kapal yang dapat disesuaikan dengan kebutuhan pelanggan, mulai dari perjalanan wisata, transportasi antar pulau, hingga keperluan profesional seperti survei laut atau kegiatan ekspedisi. Dengan sistem pemesanan yang praktis dan transparan, KAPALIN berkomitmen untuk memberikan pengalaman sewa kapal yang aman, nyaman, dan efisien. Didukung oleh mitra kapal berpengalaman serta layanan pelanggan yang responsif, kami terus berupaya menghadirkan solusi terbaik bagi setiap perjalanan Anda di laut."
                                       FontSize="14"
                                       TextWrapping="Wrap"
                                       Foreground="Gray"
                                       TextAlignment="Justify"/>
                        </StackPanel>

                    </Border>
                </WrapPanel>


                <!-- WHY US -->
                <WrapPanel x:Name="WhyUsPanel" Margin="20" Width="800">
                    <Border Background="White" Margin="20" Width="750"
                            CornerRadius="10" Padding="20">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="20" Opacity="0.3" ShadowDepth="2" Color="#FF88A8FF"/>
                        </Border.Effect>

                        <StackPanel>
                            <TextBlock Text="WHY US?"
                                       FontSize="26"
                                       FontWeight="Bold"
                                       Foreground="#0D47A1"
                                       Margin="0,0,0,10"
                                       TextAlignment="Center"/>

                            <TextBlock Text="   KAPALIN hadir dengan komitmen untuk memberikan layanan penyewaan kapal yang cepat, aman, dan tepercaya. Kami memastikan setiap kapal yang tersedia telah melalui proses pengecekan kualitas dan standar keselamatan yang ketat, sehingga pelanggan dapat berlayar dengan rasa aman dan nyaman. Selain itu, proses pemesanan yang mudah dan transparan memudahkan pelanggan untuk memilih kapal sesuai kebutuhan tanpa kerumitan.
                                       &#10;&#10;   Dengan dukungan tim profesional serta jaringan mitra kapal yang luas, kami mampu memberikan pelayanan yang responsif, informatif, dan berorientasi pada kepuasan pelanggan. Dedikasi kami dalam menjaga kualitas layanan menjadikan KAPALIN pilihan tepat bagi siapa pun yang membutuhkan solusi penyewaan kapal yang efisien dan dapat diandalkan."
                                       FontSize="14"
                                       TextWrapping="Wrap"
                                       Foreground="Gray"
                                       TextAlignment="Justify"/>
                        </StackPanel>
                    </Border>
                </WrapPanel>

            </StackPanel>
        </ScrollViewer>

        <!-- HEADER BAR -->
        <Border Background="#1E63E9" BorderBrush="#1649B2" Height="50" VerticalAlignment="Top" Panel.ZIndex="20">
            <Grid>
                <Button x:Name="ToggleSidebarButton" Width="40" Height="40"
                        Background="Transparent" BorderBrush="Transparent"
                        Margin="10,0,0,0" HorizontalAlignment="Left"
                        Click="ToggleSidebar_Click">
                    <TextBlock Text="☰" Foreground="White" FontSize="22"/>
                </Button>

                <TextBlock Text="Dashboard - KAPALIN"
                           Foreground="White" FontSize="18" FontWeight="Bold"
                           VerticalAlignment="Center" Margin="60,0,0,0"/>
                <Image Source="Assets/kapalinLOGO.png"
                           Width="50" Height="50"
                           Margin="60,0,0,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <Border x:Name="Overlay"
                Background="#80000000"
                Visibility="Collapsed"
                Panel.ZIndex="15"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                MouseDown="Overlay_MouseDown"/>

        <!-- SIDEBAR -->
        <Border x:Name="Sidebar"
                Background="#1E63E9"
                BorderBrush="#1649B2"
                Width="220"
                HorizontalAlignment="Left"
                VerticalAlignment="Stretch"
                Panel.ZIndex="20"
                RenderTransformOrigin="0,0">
            <Border.RenderTransform>
                <TranslateTransform x:Name="SidebarTransform" X="-220"/>
            </Border.RenderTransform>

            <StackPanel Margin="10">

                <!-- Header Sidebar -->
                <Grid Margin="0,10,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                               Text="MENU"
                               Foreground="White"
                               FontSize="18"
                               FontWeight="Bold"
                               Margin="20,0,0,0"
                               VerticalAlignment="Center"/>

                    <Button Grid.Column="1"
                            x:Name="SidebarCloseButton"
                            Width="36" Height="36"
                            Margin="8,0,0,0"
                            Background="Transparent"
                            BorderBrush="Transparent"
                            Foreground="White"
                            FontSize="18"
                            Click="ToggleSidebar_Click">
                        <TextBlock Text="✕"/>
                    </Button>
                </Grid>

                <Button Style="{StaticResource SidebarButtonStyle}" Content="RentalL"
                        Click="RentalSection_Click" Margin="10"/>
                
                <Button Style="{StaticResource SidebarButtonStyle}" Content="ABOUT US"
                        Click="AboutUsSection_Click" Margin="10"/>

                <Button Style="{StaticResource SidebarButtonStyle}" Content="WHY US"
                        Click="WhyUsSection_Click" Margin="10"/>

                <Button Style="{StaticResource SidebarButtonStyle}" Content="Cek Booking"
                        Click="BtnCekBooking_Click" Margin="10"/>
                
                <Button x:Name="LogoutButton" Content="Logout" Background="Red" Foreground="White"
                        Width="180" Height="30" FontSize="14" FontWeight="SemiBold"
                        Margin="10" Click="BtnLogout_Click"/>
     
            </StackPanel>

        </Border>

    </Grid>
</Window>
